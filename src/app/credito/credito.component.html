<link  href="https://fonts.googleapis.com/icon?family=Material+Icons"  rel="stylesheet"
/>

<link href="https://fonts.googleapis.com/css2?family=Times+New+Roman:wght@400;700&display=swap" rel="stylesheet">

<img src="/path/to/icons/example-icon.svg" alt="An example icon" style="width:24px;height:24px" />



<div class="main-content">
  <div class="container-fluid">

    <button mat-raised-button type="submit" class=" btn1 btn-danger pull-right card-title" 
    routerLink="/registrodecreditos">AGREGAR +</button>
    
    <div class="search-container col-md-10">
      <label class="label">Buscar nombre persona:</label>
      <div class="search-box">
        <input type="text" class="form-control" [(ngModel)]="nombrePersonaABuscar" (ngModelChange)="filtrarPorNombre($event)" />

      </div>
    </div>
    
    
<br>
     
    


    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <div class="card">
            <div class="card-header card-header-danger d-flex align-items-center justify-content-between">
              <h4 class="card-title disabled">
                <img
                  src="/assets/img/tarjeta-de-credito.png"
                  class="edit"
                  alt=""
                />
                Créditos 
              </h4>
  
        
  
            <li class="nav-item dropdown">
              <a class="nav-link label2 col" href="javascript:void(0)" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"  >
                Descargar    <i class="material-icons">file_download</i> 
                
                  <p>
                      <span class="d-lg-none d-md-block"> </span>
                  </p>
              </a>
              <div class="dropdown-menu  dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
                  <a class="dropdown-item" (click)="descargarDatos()"  >Exportar a excel <img class="tamimg" src="/assets/img/microsoft-excel.svg" alt=""> </a>
                  <a class="dropdown-item" (click)="descargarPDF()"  > Exportar a pdf <i class="material-icons">picture_as_pdf</i></a>
                
                  
              </div>
          </li>
  
  
            </div>

            <div class="card-body">
              <div class="table-responsive">
                <div *ngIf="creditosss && creditosss.length > 0">
                  <table class="table">
                    <thead >
                      <tr>
                        <th>Crédito a</th>
                        <th>Detalles del Crédito</th>
                        <th>Total a Pagar</th>
                        <th>Acción</th>
                      </tr>
                    </thead>
                    <tbody>
                      <ng-container *ngFor="let credito of creditosss">
                        <tr>
                          <td>
                            <p>{{ credito.persona.Apellido1 }} {{ credito.persona.Apellido2 }} {{ credito.persona.Nombre1 }} {{ credito.persona.Nombre2 }}</p>
                          </td>
                          <td>
                            <table class="table table-bordered">
                              <thead class="text-primary">
                                <tr  >
                                  <th>Fecha</th>
                                  <th>Plato</th>
                                  <th>Precio</th>
                                  <th>Cantidad</th>
                                  <th>Precio Final</th>
                                   
                                
                                </tr>
                              </thead>
                              <tbody>
                                <ng-container *ngFor="let creditoPorFecha of credito.creditosPorFecha; let first = first">
                                  <tr *ngFor="let creditoDetalle of creditoPorFecha.creditos; let firstDetail = first">
                                    <td *ngIf="firstDetail" [attr.rowspan]="creditoPorFecha.creditos.length">{{ creditoPorFecha.fecha }}</td>
                                    <td>{{ creditoDetalle.plato.descripcion }}</td>
                                    <td>{{ creditoDetalle.precio }}</td>
                                    <td>{{ creditoDetalle.cantidad }}</td>
                                    <td>{{ creditoDetalle.precio_final }}</td>
                                    
                                  </tr>
                                </ng-container>
                              </tbody>
                            </table>
                          </td>
                          <td>
                            <p class="total-precio">  {{ credito.totalPrecioFinal }}</p>
                          </td>
                          <td>
                            <button1 color="primary" (click)="editarCreditos(credito)">
                              <i class="material-icons editable-row" data-toggle="modal" data-target="#ventanaForm">edit</i>
                          </button1>
                          
                           
      
                          </td>
                        </tr>
                      </ng-container>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>

            <div *ngIf="!creditosss || creditosss.length === 0" class="text-center">
              <img src="/assets/img/creddd.png" class="edit" alt="" />
            </div>

          
            

          </div>
         
        </div>
      </div>
    </div>
  </div>
</div>
    
    




<div class="modal fade tam1 my-custom-modal responsive" id="ventanaForm" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document" style="position: fixed; top: 45%; left: 50%; transform: translate(-50%, -50%); display: flex; flex-direction: column; justify-content: center; align-items: center;">

    <div class="modal-content tam">
      <div class="heads x tam1 ">
        <h5 class="modal-title texto-grueso " id="exampleModalLabel">
          Cancelar Crédito $  <img src="/assets/img/mn.png" />
        </h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body modal-with-padding">
        <form [formGroup]="creditosFormversion2">

          <div class="centered-horizontal">
            <div *ngIf="selectedCredito" class="datos-credito">

              <label class="el">{{ selectedCredito.persona.Apellido1 }} {{ selectedCredito.persona.Apellido2 }} {{ selectedCredito.persona.Nombre1 }} {{ selectedCredito.persona.Nombre2 }}</label>
            <br>  <label class="el">Total a cancelar $: {{ selectedCredito.totalPrecioFinal }}</label>
            
              
            </div>

          </div>
          

          
        

        
<br>
          <div class="centered-horizontal ">
        
            <div class="form-row">
              <div class="form-group col-md-12">
                <!-- Only show the label and radio buttons when in "edit" mode -->
              
                  <label for="inputState" class="select-gr">Cancelar</label>
                  <br />
                  <!-- Elimina el input anterior y utiliza radio buttons -->
                  <label class="letrasi" for="si">Si</label>
                  <input
                    type="checkbox"
                    id="si"
                    name="habilitado"
                    formControlName="pagado"
                    value="1"
                    class="radio-custom"
                  />
                
                  <br />
                  
  
                <div *ngIf="showPagadoError" class="text-danger">
                  Campo requerido
                </div>
              </div>
            </div>
  
        </div>

       
          <input type="hidden" formControlName="funcion" />
        </form>
      </div>

      <div class="modal-footer justify-content-center">
        <button type="button" class="btn" data-dismiss="modal" (click)="closeModal()" >
          Cerrar
        </button>
       


        <button type="button" class="btn btn-danger" (click)="modificarcredito()" data-dismiss="modal">
          {{ editandoCreditos   ? 'Modificar' : 'Cobrar' }}
        </button>
      </div>
    </div>
  </div>
</div>









